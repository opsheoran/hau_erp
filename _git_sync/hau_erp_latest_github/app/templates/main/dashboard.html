{% extends "base.html" %}
{% block content %}
<div class="row">
    <div class="col-12 mb-4">
        <div class="card card-hau p-4">
            <h4 class="text-primary fw-bold mb-0">{{ current_mod.modulename }} Dashboard</h4>
            <p class="text-muted small">Location: {{ selected_loc }}</p>
        </div>
    </div>

    <!-- Services Grid -->
    <div class="col-md-9">
        <div class="row g-3">
            {% for r in all_rights %}
                {% if r.fk_moduleId|string == current_mod.pk_moduleId|string and r.AllowView %}
                <div class="col-md-4 col-lg-3">
                    <a href="{{ r.url }}" class="text-decoration-none">
                        <div class="card card-hau h-100 text-center p-3 hover-shadow border-0 bg-light">
                            <div class="mb-2">
                                {% if 'Master' in r.PageName or 'Master' in r.PageName %}
                                    <i class="bi bi-database-fill-gear fs-1 text-primary"></i>
                                {% elif 'Report' in r.PageName or 'Slip' in r.PageName %}
                                    <i class="bi bi-file-earmark-bar-graph-fill fs-1 text-success"></i>
                                {% elif 'Process' in r.PageName %}
                                    <i class="bi bi-gear-wide-connected fs-1 text-warning"></i>
                                {% elif 'Rights' in r.PageName or 'User' in r.PageName or 'Role' in r.PageName %}
                                    <i class="bi bi-person-fill-lock fs-1 text-danger"></i>
                                {% else %}
                                    <i class="bi bi-window-sidebar fs-1 text-secondary"></i>
                                {% endif %}
                            </div>
                            <h6 class="text-dark small fw-bold mb-0">{{ r.PageName }}</h6>
                        </div>
                    </a>
                </div>
                {% endif %}
            {% endfor %}
        </div>
    </div>

    <!-- Notifications -->
    <div class="col-md-3">
        {% if pending_leaves > 0 %}
        <div class="card card-hau border-warning mb-3">
            <div class="card-header bg-warning text-dark fw-bold small">Alerts</div>
            <div class="card-body">
                <p class="small mb-2">You have <b>{{ pending_leaves }}</b> pending leave requests.</p>
                <a href="{{ url_for('leave.approvals') }}" class="btn btn-warning btn-sm w-100">Review</a>
            </div>
        </div>
        {% endif %}
        
        <div class="card card-hau">
            <div class="card-header fw-bold small">Announcements</div>
            <div class="card-body">
                <p class="small text-muted">No new announcements.</p>
            </div>
        </div>
    </div>
</div>

<style>
    .hover-shadow:hover { transform: translateY(-3px); box-shadow: 0 5px 15px rgba(0,0,0,0.1); transition: all 0.2s; }
</style>
{% endblock %}